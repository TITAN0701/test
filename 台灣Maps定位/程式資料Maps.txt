<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Marker animations with <code>setTimeout()</code></title>
    <style>
     
      #map {
        height: 100%;
      }
      
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      #floating-panel {
        position: absolute;
        top: 10px;
        left: 25%;
        z-index: 5;
        background-color: #fff;
        padding: 5px;
        border: 1px solid #999;
        text-align: center;
        font-family: 'Roboto','sans-serif';
        line-height: 30px;
        padding-left: 10px;
      }
      #floating-panel {
        margin-left: -52px;
      }
    </style>
  </head>
  <body>
    <div id="floating-panel">
      <button id="drop" onclick="drop()">Drop Markers</button>
    </div>
    <div id="map"></div>
    <script>
      var neighborhoods = [
        {lat:24.99116,lng:121.53398},
{lat:25.068914,lng:121.662748},
{lat:25.064162,lng:121.658301},
{lat:25.07315,lng:121.662555},
{lat:24.979649,lng:121.546319},
{lat:24.983977,lng:121.541721},
{lat:25.064106,lng:121.653019},
{lat:25.060125,lng:121.483101},
{lat:25.054391,lng:121.488489},
{lat:25.055883,lng:121.484739},
{lat:25.066688,lng:121.640367},
{lat:25.0688,lng:121.628908},
{lat:25.047578,lng:121.618888},
{lat:25.039031,lng:121.624333},
{lat:25.025358,lng:121.428348},
{lat:25.0241250,lng:121.423870},
{lat:25.017113,lng:121.428048},
{lat:24.974272,lng:121.542779},
{lat:25.090565,lng:121.471621},
{lat:25.066245 ,lng:121.484337 },
{lat:25.063396,lng:121.488982},
{lat:25.068681,lng:121.480705},
{lat:25.036152 ,lng:121.452069 },
{lat:25.065042,lng:121.633149},
{lat:25.056875,lng:121.655207},
{lat:24.996151 ,lng:121.521988 },
{lat:25.001013,lng:121.511588},
{lat:25.005952,lng:121.520930},
{lat:25.009838,lng:121.505825},
{lat:25.000726 ,lng:121.514350 },
{lat:25.069473,lng:121.631525},
{lat:25.085688,lng:121.483618},
{lat:25.085815 ,lng:121.472722 },
{lat:25.083316 ,lng:121.463894 },
{lat:25.027694,lng:121.414662},
{lat:24.977227,lng:121.538140},
{lat:24.976180 ,lng:121.546870 },
{lat:25.041603,lng:121.446053},
{lat:25.015811,lng:121.511261},
{lat:25.002272 ,lng:121.517442 },
{lat:24.999392 ,lng:121.522843 },
{lat:24.985872 ,lng:121.536887 },
{lat:25.012176 ,lng:121.515271 },
{lat:25.012691 ,lng:121.506471 },
{lat:24.972127 ,lng:121.539554 },
{lat:24.974181 ,lng:121.534209 },
{lat:25.047150 ,lng:121.444453 },
{lat:25.180345,lng:121.444742},
{lat:25.178512,lng:121.447874},
{lat:24.984102,lng:121.458595},
{lat:25.009061,lng:121.468352},
{lat:25.060339,lng:121.500103},
{lat:24.975317,lng:121.515687},
{lat:24.992249,lng:121.504443},
{lat:25.032300,lng:121.450011},
{lat:25.065295,lng:121.490450},
{lat:25.189448,lng:121.438708},
{lat:25.082935,lng:121.456728},
{lat:25.168826,lng:121.444183},
{lat:24.961147,lng:121.509988},
{lat:25.186496,lng:121.443261},
{lat:25.137658,lng:121.460112},
{lat:25.074815,lng:121.498484},
{lat:25.188887,lng:121.443505},
{lat:25.078599,lng:121.462228},
{lat:25.000894,lng:121.431485},
{lat:24.934187,lng:121.369158},
{lat:25.077118,lng:121.374258},
{lat:24.993901,lng:121.432880},
{lat:25.076133,lng:121.484304},
{lat:25.085621,lng:121.477694},
{lat:25.069661,lng:121.494048},
{lat:25.079592,lng:121.385587},
{lat:24.945553,lng:121.373260},
{lat:25.076742,lng:121.388181},
{lat:25.070428,lng:121.376882},
{lat:25.025940,lng:121.417694},
{lat:24.981146,lng:121.416844},
{lat:25.094784,lng:121.446741},
{lat:24.999098,lng:121.468345},
{lat:25.069123,lng:121.367761},
{lat:24.980236,lng:121.408605},
{lat:24.939095,lng:121.334639},
{lat:25.055969,lng:121.444423},
{lat:24.950576,lng:121.386183},
{lat:24.999132,lng:121.472513},
{lat:25.083156,lng:121.378464},
{lat:25.078126,lng:121.397208},
{lat:24.956661,lng:121.339645},
{lat:25.065970,lng:121.361962},
{lat:25.073427,lng:121.362340},
{lat:24.990060,lng:121.432281},
{lat:24.952762,lng:121.411701},
{lat:25.034961,lng:121.421928},
{lat:24.956343,lng:121.414421},
{lat:24.928438,lng:121.375921},
{lat:25.080533,lng:121.389307},
{lat:25.074035,lng:121.358924},
{lat:24.977837,lng:121.459751},
{lat:25.074150,lng:121.377001},
{lat:25.036075,lng:121.452792},
{lat:25.009150,lng:121.425183},
{lat:25.094701,lng:121.448105},
{lat:24.945099,lng:121.378671},
{lat:25.039365,lng:121.460856},
{lat:25.105052,lng:121.452963},
{lat:25.081673,lng:121.372687},
{lat:24.986691,lng:121.465481},
{lat:24.938912,lng:121.363553},
{lat:24.998558,lng:121.500533},
{lat:25.078202,lng:121.624493},
{lat:25.074629,lng:121.478162},
{lat:25.007502,lng:121.448000},
{lat:25.040766,lng:121.452459},
{lat:25.011232,lng:121.517701},
{lat:25.016405,lng:121.407135},
{lat:25.082273,lng:121.482236},
{lat:24.993700,lng:121.478230},
{lat:25.072864,lng:121.369480},
{lat:24.996867,lng:121.496647},
{lat:25.076441,lng:121.367223},
{lat:25.012614,lng:121.466455},
{lat:24.982756,lng:121.465444},
{lat:25.015519,lng:121.463735},
{lng:121.436484,lat:25.020774},
{lng:121.429556,lat:25.055970},
{lng:121.471327,lat:25.064819},
{lng:121.663885,lat:25.082494},
{lng:121.439555,lat:24.963289},
{lng:121.419672,lat:25.006927},
{lng:121.503171,lat:25.033086},
{lng:121.468403,lat:25.021447},
{lng:121.416497,lat:25.030186},
{lng:121.413402,lat:25.016361},
{lng:121.404257,lat:24.982770},
{lng:121.449900,lat:25.108506},
{lng:121.806460,lat:24.978108},
{lng:121.439369,lat:25.003555},
{lng:121.524246,lat:25.001834},
{lng:121.482594,lat:24.992983},
{lng:121.428196,lat:25.000868},
{lng:121.416091,lat:24.938911},
{lng:121.373676,lat:24.944300},
{lng:121.342089,lat:24.982138},
{lng:121.540903,lat:25.004098},
{lng:121.444447,lat:24.984695},
{lng:121.448504,lat:25.0015},
{lng:121.616311,lat:25.0033},
{lng:121.602501,lat:25.003136},
{lng:121.468087,lat:25.108472},
{lng:121.809735,lat:25.008390},
{lng:121.520234,lat:25.074424},
{lng:121.467852,lat:25.011210},
{lng:121.447237,lat:25.086448},
{lng:121.485599,lat:25.080648},
{lng:121.496149,lat:25.074974},
{lng:121.500542,lat:25.071928},
{lng:121.481508,lat:25.081620},
{lng:121.461620,lat:25.077564},
{lng:121.466071,lat:25.001110},
{lng:121.501991,lat:24.983471},
{lng:121.504826,lat:25.007010},
{lng:121.509208,lat:25.062884},
{lng:121.646597,lat:24.989103},
{lng:121.418296,lat:24.958747},
{lng:121.333095,lat:24.927551},
{lng:121.366919,lat:24.930341},
{lng:121.378835,lat:24.926790},
{lng:121.371957,lat:24.941224},
{lng:121.376763,lat:24.983043},
{lng:121.411318,lat:24.989760},
{lng:121.424780,lat:25.085055},
{lng:121.481887,lat:25.019078},
{lng:121.473724,lat:24.989236},
{lng:121.491482,lat:25.146498},
{lng:121.399748,lat:24.972621},
{lng:121.434796,lat:24.992158},
{lng:121.417726,lat:25.183869},
{lng:121.411178,lat:24.974674},
{lng:121.404424,lat:25.058100}
      ];

      var markers = [];
      var map;

      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          zoom: 10,
          center: {lat: 24.993628, lng: 121.300980}
        });
      }

      function drop() {
        clearMarkers();
        for (var i = 0; i < neighborhoods.length; i++) {
          addMarkerWithTimeout(neighborhoods[i], i * 200);
        }
      }

      function addMarkerWithTimeout(position, timeout) {
        window.setTimeout(function() {
          markers.push(new google.maps.Marker({
            position: position,
            map: map,
            animation: google.maps.Animation.DROP
          }));
        }, timeout);
      }

      function clearMarkers() {
        for (var i = 0; i < markers.length; i++) {
          markers[i].setMap(null);
        }
        markers = [];
      }
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDhL4KNVLIb4tHnkkuKvHAwlmKSPo1MSCE&callback=initMap">
    </script>
  </body>
</html>